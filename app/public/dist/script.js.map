{"version":3,"sources":["webpack:///webpack/bootstrap 0dd624b6180c45e0d3fe","webpack:///./src/script.es6","webpack:///./src/three-view.es6","webpack:///./src/three-world.es6","webpack:///./src/menuhandler.es6"],"names":["Controller","a","b","view","world","cameraControlObject","transformControlObject","menu","events","imgUploaded","data","addPlane","then","attachTransformControls","mesh","mainLoop","window","requestAnimationFrame","update","render","scene","document","addEventListener","c","View","camera","getCamera","renderer","getRenderer","cameraControls","getCameraControls","transformControls","getTransformControls","resizeHandler","e","target","innerWidth","innerHeight","attach","w","h","aspect","updateProjectionMatrix","useQuaternions","setSize","cam","THREE","PerspectiveCamera","controls","PointerLockControls","getObject","position","y","z","button","enabled","preventDefault","keyCode","setTranslationSnap","setRotationSnap","Math","degToRad","setMode","TransformControls","domElement","r","WebGLRenderer","setClearColor","shadowMap","body","appendChild","World","additionalObjs","floorObject","getFloorObject","lights","getLights","skybox","getSkybox","getScene","forEach","add","obj","image","Promise","console","log","material","MeshBasicMaterial","map","TextureLoader","load","url","side","DoubleSide","scale","max","width","height","geometry","PlaneGeometry","plane","Mesh","resolve","l","PointLight","set","push","imagePrefix","directions","imageSuffix","skyGeometry","BoxGeometry","loader","skyMaterial","i","BackSide","Scene","MeshStandardMaterial","color","rotation","x","PI","MenuHandler","ui","getElementById","imgSubmit","uploadImage","file","imgUpload","files","formData","FormData","type","match","statusDiv","innerHTML","size","append","name","xhr","XMLHttpRequest","open","onload","status","json","JSON","parse","response","send"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0dd624b6180c45e0d3fe","import View from './three-view.es6';\r\nimport World from './three-world.es6';\r\nimport MenuHandler from './menuhandler.es6';\r\n\r\nclass Controller {\r\n    constructor(a, b) {\r\n        this.view = new View();\r\n        this.world = new World([\r\n            this.view.cameraControlObject, \r\n            this.view.transformControlObject\r\n        ]);\r\n        this.menu = new MenuHandler();\r\n\r\n        this.menu.events.imgUploaded = (data) => { \r\n            this.world.addPlane(data)\r\n                .then(mesh => {\r\n                    this.view.attachTransformControls(mesh);\r\n                }); \r\n        };\r\n\r\n        this.mainLoop();\r\n    }\r\n\r\n    mainLoop() {\r\n      window.requestAnimationFrame(() => {\r\n       this.mainLoop();\r\n      });\r\n\r\n      this.world.update();\r\n      this.view.render(this.world.scene);\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", e => {\r\n    const c = new Controller();\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/script.es6","export default class View {\r\n    constructor() {\r\n        this.camera = this.getCamera();\r\n        this.renderer = this.getRenderer();\r\n        this.cameraControls = this.getCameraControls();\r\n        this.transformControls = this.getTransformControls();\r\n  \r\n        window.addEventListener('resize', e => {\r\n          this.resizeHandler(e.target.innerWidth, e.target.innerHeight);\r\n        });\r\n    }\r\n  \r\n    /*\r\n     * 'Public' methods\r\n     */\r\n  \r\n    render(scene) {\r\n      this.renderer.render(scene, this.camera);\r\n    }\r\n\r\n    get cameraControlObject() {\r\n        return this.cameraControls.getObject();\r\n    }\r\n\r\n    get transformControlObject() {\r\n      return this.transformControls;\r\n    }\r\n\r\n    get domElement() {\r\n      return this.renderer.domElement;\r\n    }\r\n\r\n    attachTransformControls( mesh ) {\r\n      this.transformControls.attach( mesh );\r\n    }\r\n  \r\n    /*\r\n     * 'Private' methods\r\n     */\r\n  \r\n    resizeHandler(w, h) {\r\n      this.camera.aspect = w / h;\r\n      this.camera.updateProjectionMatrix();\r\n      this.camera.useQuaternions = true;\r\n      this.renderer.setSize(w, h);\r\n    }\r\n  \r\n    /*\r\n     *  'Init' methods\r\n     */\r\n  \r\n    getCamera() {\r\n      const cam = new THREE.PerspectiveCamera(\r\n        75,\r\n        window.innerWidth / window.innerHeight,\r\n        0.1,\r\n        1000\r\n      );\r\n  \r\n      return cam\r\n    }\r\n\r\n    getCameraControls() {\r\n        const controls = new THREE.PointerLockControls( this.camera );\r\n\r\n        controls.getObject().position.y = 1;\r\n        controls.getObject().position.z = 5;\r\n\r\n        document.addEventListener('mousedown', e => {\r\n         if (e.button == 2) controls.enabled = true; \r\n        });\r\n        document.addEventListener('mouseup', () => { controls.enabled = false; });\r\n        document.addEventListener('contextmenu', e => {\r\n          e.preventDefault();\r\n        });\r\n\r\n        document.addEventListener( 'keydown', e => {\r\n\t\t\t\t\tswitch ( e.keyCode ) {\t\r\n\t\t\t\t\t\tcase 17: // Ctrl\r\n              this.transformControls.setTranslationSnap( 100 );\r\n\t\t\t\t\t\t\tthis.transformControls.setRotationSnap( THREE.Math.degToRad( 15 ) );\r\n\t\t\t\t\t\t\tbreak;            \t\t\t\t\t\r\n\t\t\t\t\t\tcase 77: // M\r\n              this.transformControls.setMode( \"translate\" );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 82: // R\r\n              this.transformControls.setMode( \"rotate\" );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 83: // S\r\n              this.transformControls.setMode( \"scale\" );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdocument.addEventListener( 'keyup', e => {\r\n\t\t\t\t\tswitch ( e.keyCode ) {\r\n\t\t\t\t\t\tcase 17: // Ctrl\r\n              this.transformControls.setTranslationSnap( null );\r\n\t\t\t\t\t\t\tthis.transformControls.setRotationSnap( null );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n        return controls;\r\n    }\r\n\r\n    getTransformControls() {\r\n      return new THREE.TransformControls( this.camera, this.renderer.domElement );\r\n      //control.addEventListener( 'change', render );\r\n    }\r\n  \r\n    getRenderer() {\r\n      const r = new THREE.WebGLRenderer();\r\n      r.setClearColor(0x000000, 1);\r\n      r.setSize(window.innerWidth, window.innerHeight);\r\n      r.shadowMap.enabled = true;\r\n      document.body.appendChild(r.domElement);\r\n      return r;\r\n    }\r\n}\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/three-view.es6","export default class World {\r\n    constructor(additionalObjs) {\r\n      this.floorObject = this.getFloorObject();\r\n      this.lights = this.getLights();\r\n      this.skybox = this.getSkybox();\r\n      this.scene = this.getScene();\r\n\r\n      additionalObjs.forEach( obj => {\r\n          this.scene.add(obj);\r\n      })\r\n    }\r\n  \r\n    /*\r\n    * 'Public' methods\r\n    */\r\n  \r\n    update() {\r\n      //this.worldObject.rotation.x += 0.01;\r\n      //this.worldObject.rotation.z += 0.01;\r\n    }\r\n\r\n    addPlane(image) {\r\n      return new Promise( resolve => {\r\n        console.log(image);\r\n        const material = new THREE.MeshBasicMaterial( { \r\n          map: new THREE.TextureLoader().load( image.url ),\r\n          side: THREE.DoubleSide\r\n        } );\r\n  \r\n        const scale = 1 / Math.max(image.width, image.height);\r\n  \r\n        const geometry = new THREE.PlaneGeometry( image.width*scale, image.height*scale );\r\n  \r\n        const plane = new THREE.Mesh( geometry, material );\r\n        this.scene.add( plane );\r\n\r\n        resolve(plane);\r\n      })\r\n    }\r\n  \r\n    /*\r\n     * 'Private' methods\r\n     */\r\n  \r\n    /*\r\n     *  'Init' methods\r\n     */\r\n  \r\n    getLights() {\r\n      const lights = [];\r\n      let l;\r\n  \r\n      l = new THREE.PointLight( 0xffffff, 2, 0 );\r\n      l.position.set( 0, 10, 0 );\r\n      lights.push(l);\r\n  \r\n      return lights;\r\n    }\r\n  \r\n    getSkybox() {\r\n      const imagePrefix = \"/assets/skybox/clouds/\";\r\n      const directions = [\"WEST\", \"EAST\", \"TOP\", \"BOTTOM\", \"SOUTH\", \"NORTH\"];\r\n      const imageSuffix = \".jpg\";\r\n  \r\n      const skyGeometry = new THREE.BoxGeometry(100, 100, 100);\r\n      const loader = new THREE.TextureLoader();\r\n  \r\n      const skyMaterial = [];\r\n      for (var i = 0; i < 6; i++) {\r\n          skyMaterial.push(new THREE.MeshBasicMaterial({\r\n              map: loader.load(imagePrefix + directions[i] + imageSuffix),\r\n              side: THREE.BackSide,\r\n          }));\r\n      }\r\n  \r\n      return new THREE.Mesh(skyGeometry, skyMaterial);\r\n    }\r\n  \r\n    getScene() {\r\n      const scene = new THREE.Scene();\r\n  \r\n      this.lights.forEach( l => {\r\n        scene.add(l);\r\n      })\r\n  \r\n      scene.add(this.skybox);\r\n      scene.add(this.floorObject);\r\n  \r\n      return scene;\r\n    }\r\n  \r\n    getFloorObject() {\r\n      const plane = new THREE.Mesh(\r\n        new THREE.PlaneGeometry( 1000, 1000, 1 ),\r\n        new THREE.MeshStandardMaterial( { color: 0xffffff } )\r\n      );\r\n      plane.rotation.x -= Math.PI/2;\r\n      return plane;\r\n    }\r\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/three-world.es6","export default class MenuHandler {\r\n\r\n    constructor() {\r\n        this.ui = {\r\n            \"imgSubmit\" : document.getElementById(\"imgSubmit\"),\r\n            \"imgUpload\" : document.getElementById(\"imgUpload\"),\r\n        };\r\n\r\n        this.events = {\r\n            \"imgUploaded\" : null\r\n        };\r\n\r\n        this.ui.imgSubmit.addEventListener(\"click\", () => { this.uploadImage() });\r\n    }\r\n\r\n    uploadImage() {\r\n        const file = this.ui.imgUpload.files[0];\r\n        const formData = new FormData();\r\n\r\n        if (!file.type.match('image.*')) {\r\n            statusDiv.innerHTML = 'This file is not an image. Sorry, it can’t be uploaded. Try again with a valid image.';\r\n            return;\r\n        }\r\n\r\n        if (file.size >= 10000000 ) {\r\n            statusDiv.innerHTML = 'This file is larger than 10MB. Sorry, it can’t be uploaded.';\r\n            return;\r\n        }\r\n\r\n        formData.append('imgUpload', file, file.name);\r\n\r\n        // Set up the AJAX request.\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        // Open the connection.\r\n        xhr.open('POST', '/upload', true);\r\n\r\n\r\n        // Set up a handler for when the request finishes.\r\n        xhr.onload = () => {\r\n            if (xhr.status === 200) {\r\n                try\r\n                {\r\n                    var json = JSON.parse(xhr.response);\r\n                    if (this.events.imgUploaded && json.url.match(/http.*/) ){\r\n                        this.events.imgUploaded(json);\r\n                    }\r\n                }\r\n                catch(e)\r\n                {\r\n                    console.log(e);\r\n                }\r\n            } else {\r\n                console.log('An error occurred while uploading the file...Try again');\r\n            }\r\n        };\r\n\r\n        // Send the Data.\r\n        xhr.send(formData);\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/menuhandler.es6"],"sourceRoot":""}